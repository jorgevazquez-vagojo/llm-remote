<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Claude Remote â€” Manual de Usuario</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

  :root {
    --primary: #6c5ce7;
    --primary-light: #a29bfe;
    --accent: #00d4aa;
    --dark: #1a1a2e;
    --gray: #636e72;
    --light: #f8f9fa;
    --danger: #e74c3c;
    --warning: #f39c12;
    --success: #00b894;
    --blue: #0984e3;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Inter', -apple-system, sans-serif;
    color: #2d3436;
    line-height: 1.7;
    font-size: 11pt;
    max-width: 210mm;
    margin: 0 auto;
    padding: 15mm 20mm;
    background: white;
  }

  @media print {
    body { padding: 10mm 15mm; }
    .page-break { page-break-before: always; }
    .no-print { display: none; }
  }

  /* Cover */
  .cover {
    text-align: center;
    padding: 60px 0 40px;
    border-bottom: 3px solid var(--primary);
    margin-bottom: 40px;
  }
  .cover .logo {
    font-size: 48pt;
    font-weight: 700;
    color: var(--primary);
    letter-spacing: -2px;
    margin-bottom: 8px;
  }
  .cover .subtitle {
    font-size: 16pt;
    color: var(--gray);
    font-weight: 300;
    margin-bottom: 20px;
  }
  .cover .org {
    font-size: 11pt;
    color: var(--accent);
    font-weight: 600;
    letter-spacing: 3px;
    text-transform: uppercase;
  }
  .cover .meta {
    margin-top: 30px;
    font-size: 9pt;
    color: var(--gray);
  }
  .cover .meta span { margin: 0 12px; }

  /* Headers */
  h1 {
    font-size: 22pt;
    color: var(--primary);
    font-weight: 700;
    margin: 35px 0 15px;
    padding-bottom: 8px;
    border-bottom: 2px solid var(--primary-light);
  }
  h2 {
    font-size: 16pt;
    color: var(--dark);
    font-weight: 600;
    margin: 25px 0 12px;
  }
  h3 {
    font-size: 12pt;
    color: var(--primary);
    font-weight: 600;
    margin: 18px 0 8px;
  }

  p { margin: 8px 0; }

  /* Code */
  code {
    font-family: 'JetBrains Mono', monospace;
    background: #f1f2f6;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 9.5pt;
  }
  pre {
    background: var(--dark);
    color: #dfe6e9;
    padding: 16px 20px;
    border-radius: 8px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 9pt;
    line-height: 1.6;
    overflow-x: auto;
    margin: 12px 0;
  }
  pre code {
    background: none;
    padding: 0;
    color: inherit;
  }
  .cmd { color: var(--accent); }
  .comment { color: #636e72; }
  .string { color: #fdcb6e; }

  /* Tables */
  table {
    width: 100%;
    border-collapse: collapse;
    margin: 12px 0;
    font-size: 10pt;
  }
  th {
    background: var(--primary);
    color: white;
    padding: 10px 14px;
    text-align: left;
    font-weight: 600;
  }
  td {
    padding: 8px 14px;
    border-bottom: 1px solid #eee;
  }
  tr:nth-child(even) { background: #f8f9fa; }
  tr:hover { background: #f1f2f6; }

  /* Info boxes */
  .box {
    padding: 14px 18px;
    border-radius: 8px;
    margin: 14px 0;
    border-left: 4px solid;
  }
  .box-info { background: #e8f4fd; border-color: var(--blue); }
  .box-warn { background: #fef9e7; border-color: var(--warning); }
  .box-danger { background: #fde8e8; border-color: var(--danger); }
  .box-success { background: #e8fdf5; border-color: var(--success); }
  .box-title {
    font-weight: 600;
    margin-bottom: 4px;
  }

  /* List */
  ul, ol {
    margin: 8px 0 8px 24px;
  }
  li { margin: 4px 0; }

  /* Badge */
  .badge {
    display: inline-block;
    padding: 2px 10px;
    border-radius: 12px;
    font-size: 8.5pt;
    font-weight: 600;
    color: white;
  }
  .badge-free { background: var(--success); }
  .badge-paid { background: var(--warning); }
  .badge-agent { background: var(--primary); }

  /* Architecture diagram */
  .diagram {
    background: #f8f9fa;
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 20px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 9pt;
    line-height: 1.4;
    white-space: pre;
    overflow-x: auto;
    margin: 14px 0;
  }

  /* Footer */
  .footer {
    margin-top: 40px;
    padding-top: 15px;
    border-top: 1px solid #ddd;
    font-size: 8.5pt;
    color: var(--gray);
    text-align: center;
  }

  /* TOC */
  .toc {
    background: var(--light);
    border-radius: 8px;
    padding: 20px 30px;
    margin: 20px 0;
  }
  .toc h2 { margin-top: 0; }
  .toc ol { line-height: 2; }
  .toc a { color: var(--primary); text-decoration: none; }
  .toc a:hover { text-decoration: underline; }
</style>
</head>
<body>

<!-- PORTADA -->
<div class="cover">
  <div class="logo">Claude Remote</div>
  <div class="subtitle">Puente Cifrado Telegram â†” IA Multi-Proveedor</div>
  <div class="org">Redegal Â· Digital Consulting Group</div>
  <div class="meta">
    <span>VersiÃ³n 1.2</span>
    <span>Â·</span>
    <span>Febrero 2026</span>
    <span>Â·</span>
    <span>Documento interno</span>
  </div>
</div>

<!-- ÃNDICE -->
<div class="toc">
  <h2>Ãndice</h2>
  <ol>
    <li><a href="#intro">IntroducciÃ³n</a></li>
    <li><a href="#providers">Proveedores IA</a></li>
    <li><a href="#install">InstalaciÃ³n</a></li>
    <li><a href="#config">ConfiguraciÃ³n</a></li>
    <li><a href="#usage">Uso desde Telegram</a></li>
    <li><a href="#commands">Referencia de Comandos</a></li>
    <li><a href="#security">Arquitectura de Seguridad</a></li>
    <li><a href="#architecture">Arquitectura TÃ©cnica</a></li>
    <li><a href="#troubleshooting">ResoluciÃ³n de Problemas</a></li>
    <li><a href="#env">Variables de Entorno</a></li>
  </ol>
</div>

<!-- 1. INTRODUCCIÃ“N -->
<h1 id="intro">1. IntroducciÃ³n</h1>

<p><strong>Claude Remote</strong> es una herramienta interna que permite a los miembros del equipo de Redegal interactuar con mÃºltiples proveedores de IA (Claude Code, OpenAI, Gemini, Groq) directamente desde Telegram, con cifrado de nivel bancario.</p>

<h3>Â¿Para quÃ© sirve?</h3>
<ul>
  <li><strong>Desarrollo remoto</strong> â€” Ejecuta Claude Code en tu mÃ¡quina desde cualquier lugar</li>
  <li><strong>Consultas rÃ¡pidas</strong> â€” Pregunta a GPT-4o, Gemini o Llama desde el mÃ³vil</li>
  <li><strong>Multi-proyecto</strong> â€” Cambia entre proyectos con un comando</li>
  <li><strong>Seguro</strong> â€” Todo cifrado, autenticado y con audit log</li>
</ul>

<div class="box box-info">
  <div class="box-title">Requisitos previos</div>
  Node.js 20+, un bot de Telegram (de @BotFather), y opcionalmente Claude Code CLI.
</div>

<!-- 2. PROVEEDORES -->
<div class="page-break"></div>
<h1 id="providers">2. Proveedores IA</h1>

<p>Claude Remote soporta 5 proveedores. Cambia entre ellos con <code>/ia &lt;nombre&gt;</code> en Telegram.</p>

<table>
  <tr>
    <th>Proveedor</th>
    <th>Comando</th>
    <th>Modo</th>
    <th>Coste</th>
  </tr>
  <tr>
    <td>ğŸŸ£ <strong>Claude Code</strong></td>
    <td><code>/ia claude</code></td>
    <td><span class="badge badge-agent">Agentic</span> Lee/escribe ficheros, ejecuta comandos</td>
    <td><span class="badge badge-paid">SegÃºn plan</span></td>
  </tr>
  <tr>
    <td>ğŸŸ¢ <strong>OpenAI GPT-4o</strong></td>
    <td><code>/ia openai</code></td>
    <td>Chat API</td>
    <td><span class="badge badge-paid">Pay-per-use</span></td>
  </tr>
  <tr>
    <td>ğŸ”µ <strong>Gemini 2.5 Flash</strong></td>
    <td><code>/ia gemini</code></td>
    <td>Chat API</td>
    <td><span class="badge badge-free">Gratis</span> 20 req/dÃ­a</td>
  </tr>
  <tr>
    <td>ğŸŸ  <strong>Groq Llama 3.3</strong></td>
    <td><code>/ia groq</code></td>
    <td>Chat API (ultra-rÃ¡pido)</td>
    <td><span class="badge badge-free">Gratis</span> 30 req/min</td>
  </tr>
  <tr>
    <td>ğŸŸ£ <strong>Anthropic Sonnet</strong></td>
    <td><code>/ia anthropic</code></td>
    <td>Chat API (sin agentic)</td>
    <td><span class="badge badge-paid">Pay-per-use</span></td>
  </tr>
</table>

<div class="box box-success">
  <div class="box-title">RecomendaciÃ³n para uso diario</div>
  Usa <strong>Groq</strong> para consultas rÃ¡pidas (gratis, respuesta en &lt;1s) y <strong>Claude Code</strong> cuando necesites que la IA modifique archivos o ejecute comandos en tu mÃ¡quina.
</div>

<h3>Diferencia entre Claude Code y Anthropic API</h3>
<ul>
  <li><strong>Claude Code</strong> (<code>/ia claude</code>) â€” Modo agentic completo. Puede leer ficheros, escribir cÃ³digo, ejecutar comandos, navegar tu proyecto. Usa el CLI de Claude Code.</li>
  <li><strong>Anthropic API</strong> (<code>/ia anthropic</code>) â€” Solo chat. Responde preguntas pero no tiene acceso a tu sistema de archivos. Usa la API directamente.</li>
</ul>

<!-- 3. INSTALACIÃ“N -->
<div class="page-break"></div>
<h1 id="install">3. InstalaciÃ³n</h1>

<h2>3.1 InstalaciÃ³n automÃ¡tica (recomendado)</h2>

<p>Un solo comando que verifica requisitos, descarga, instala y configura:</p>

<pre><code><span class="cmd">bash</span> installer.sh</code></pre>

<p>El instalador hace todo automÃ¡ticamente:</p>
<ol>
  <li>Verifica Node.js 20+, npm, git, Claude Code CLI</li>
  <li>Descarga o actualiza el proyecto</li>
  <li>Instala dependencias npm</li>
  <li>Lanza el configurador interactivo (6 pasos)</li>
  <li>Opcionalmente crea un servicio de auto-arranque</li>
</ol>

<h2>3.2 InstalaciÃ³n manual</h2>

<pre><code><span class="comment"># 1. Clonar repositorio</span>
<span class="cmd">git clone</span> &lt;repo-url&gt; ~/claude-remote
<span class="cmd">cd</span> ~/claude-remote

<span class="comment"># 2. Instalar dependencias</span>
<span class="cmd">npm install</span>

<span class="comment"># 3. Configurar</span>
<span class="cmd">npm run</span> setup

<span class="comment"># 4. Arrancar</span>
<span class="cmd">npm start</span></code></pre>

<h2>3.3 Requisitos</h2>

<table>
  <tr><th>Requisito</th><th>VersiÃ³n</th><th>Obligatorio</th><th>Notas</th></tr>
  <tr><td>Node.js</td><td>20+</td><td>SÃ­</td><td><code>brew install node</code> o nodejs.org</td></tr>
  <tr><td>npm</td><td>cualquiera</td><td>SÃ­</td><td>Viene con Node.js</td></tr>
  <tr><td>git</td><td>cualquiera</td><td>SÃ­</td><td><code>xcode-select --install</code> (macOS)</td></tr>
  <tr><td>Claude Code CLI</td><td>cualquiera</td><td>No</td><td><code>npm i -g @anthropic-ai/claude-code</code></td></tr>
</table>

<div class="box box-warn">
  <div class="box-title">Sin Claude Code CLI</div>
  Si no instalas Claude Code CLI, el proveedor <code>/ia claude</code> no funcionarÃ¡. Los demÃ¡s proveedores (OpenAI, Gemini, Groq, Anthropic) sÃ­ funcionarÃ¡n sin problema.
</div>

<!-- 4. CONFIGURACIÃ“N -->
<div class="page-break"></div>
<h1 id="config">4. ConfiguraciÃ³n</h1>

<h2>4.1 Crear bot de Telegram</h2>
<ol>
  <li>Abre <strong>@BotFather</strong> en Telegram</li>
  <li>EnvÃ­a <code>/newbot</code></li>
  <li>Elige un nombre (ej: <em>"Mi Claude Remote"</em>)</li>
  <li>Elige un username (ej: <em>"mi_claude_remote_bot"</em>)</li>
  <li>Copia el <strong>token</strong> que te da BotFather</li>
</ol>

<h2>4.2 Obtener tu Telegram User ID</h2>
<ol>
  <li>Abre <strong>@userinfobot</strong> en Telegram</li>
  <li>EnvÃ­a <code>/myid</code></li>
  <li>Copia el nÃºmero (ej: <em>123456789</em>)</li>
</ol>

<h2>4.3 Obtener API keys (opcional)</h2>

<table>
  <tr><th>Proveedor</th><th>URL</th><th>Coste</th></tr>
  <tr><td>Gemini</td><td>https://aistudio.google.com/apikey</td><td>Gratis</td></tr>
  <tr><td>Groq</td><td>https://console.groq.com/keys</td><td>Gratis</td></tr>
  <tr><td>OpenAI</td><td>https://platform.openai.com/api-keys</td><td>De pago</td></tr>
  <tr><td>Anthropic</td><td>https://console.anthropic.com/settings/keys</td><td>De pago</td></tr>
</table>

<h2>4.4 Wizard de configuraciÃ³n</h2>

<p>El wizard (<code>npm run setup</code>) te guÃ­a en 6 pasos:</p>

<pre><code>â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   Claude Remote â€” Configurador          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”€â”€ 1/6  Telegram â”€â”€
  Token del bot: &lt;pegar token&gt;
  IDs autorizados: &lt;tu user ID&gt;

â”€â”€ 2/6  Seguridad â”€â”€
  PIN: &lt;auto-generado o personalizado&gt;
  ContraseÃ±a maestra: &lt;auto-generada&gt;

â”€â”€ 3/6  SesiÃ³n y LÃ­mites â”€â”€
  Timeout: 15 min
  Max comandos/min: 10

â”€â”€ 4/6  Claude Code CLI â”€â”€
  Binario: claude
  Directorio: /Users/tu-usuario

â”€â”€ 5/6  Proveedores IA â”€â”€
  OpenAI, Gemini, Anthropic, Groq (opcionales)

â”€â”€ 6/6  Logging â”€â”€
  Nivel: info</code></pre>

<div class="box box-info">
  <div class="box-title">Reconfigurar en cualquier momento</div>
  Ejecuta <code>npm run setup</code> de nuevo. Los valores actuales aparecen como defaults.
</div>

<!-- 5. USO -->
<div class="page-break"></div>
<h1 id="usage">5. Uso desde Telegram</h1>

<h2>5.1 Primer uso</h2>
<ol>
  <li>Arranca el bot: <code>npm start</code> (o el servicio lo hace automÃ¡ticamente)</li>
  <li>Abre tu bot en Telegram</li>
  <li>EnvÃ­a <code>/start</code> para ver los comandos</li>
  <li>AutentÃ­cate: <code>/auth &lt;tu-PIN&gt;</code></li>
  <li>El mensaje del PIN se borra automÃ¡ticamente por seguridad</li>
  <li>Escribe cualquier mensaje â€” va directamente al proveedor IA activo</li>
</ol>

<h2>5.2 Cambiar proveedor IA</h2>
<pre><code><span class="comment"># Ver proveedores disponibles</span>
/ia

<span class="comment"># Cambiar a Groq (gratis, ultra-rÃ¡pido)</span>
/ia groq

<span class="comment"># Cambiar a Claude Code (agentic)</span>
/ia claude

<span class="comment"># Cambiar a Gemini (gratis)</span>
/ia gemini</code></pre>

<h2>5.3 Trabajar con proyectos</h2>
<pre><code><span class="comment"># Ver directorio actual</span>
/project

<span class="comment"># Cambiar a otro proyecto</span>
/project ~/mi-proyecto

<span class="comment"># Ahora los comandos a Claude Code operan en ~/mi-proyecto</span>
Refactoriza el archivo main.js</code></pre>

<h2>5.4 Sesiones y seguridad</h2>
<pre><code><span class="comment"># Ver estado de la sesiÃ³n</span>
/status

<span class="comment"># Bloquear manualmente</span>
/lock

<span class="comment"># Re-autenticarse</span>
/auth &lt;PIN&gt;

<span class="comment"># Ver historial (descifrado)</span>
/history</code></pre>

<!-- 6. COMANDOS -->
<div class="page-break"></div>
<h1 id="commands">6. Referencia de Comandos</h1>

<table>
  <tr>
    <th>Comando</th>
    <th>DescripciÃ³n</th>
    <th>Ejemplo</th>
  </tr>
  <tr>
    <td><code>/start</code></td>
    <td>Muestra ayuda y proveedores disponibles</td>
    <td><code>/start</code></td>
  </tr>
  <tr>
    <td><code>/auth &lt;PIN&gt;</code></td>
    <td>Autenticarse. El mensaje se borra automÃ¡ticamente.</td>
    <td><code>/auth &lt;tu-PIN&gt;</code></td>
  </tr>
  <tr>
    <td><code>/ask &lt;prompt&gt;</code></td>
    <td>Enviar prompt explÃ­cito al proveedor activo</td>
    <td><code>/ask explica quÃ© hace este regex</code></td>
  </tr>
  <tr>
    <td><code>/ia [nombre]</code></td>
    <td>Ver o cambiar proveedor IA</td>
    <td><code>/ia groq</code></td>
  </tr>
  <tr>
    <td><code>/project [ruta]</code></td>
    <td>Ver o cambiar directorio de trabajo</td>
    <td><code>/project ~/app</code></td>
  </tr>
  <tr>
    <td><code>/status</code></td>
    <td>Info de sesiÃ³n, proveedor y proceso</td>
    <td><code>/status</code></td>
  </tr>
  <tr>
    <td><code>/history</code></td>
    <td>Ãšltimos 15 comandos (descifrado del audit log)</td>
    <td><code>/history</code></td>
  </tr>
  <tr>
    <td><code>/kill</code></td>
    <td>Matar proceso Claude Code en ejecuciÃ³n</td>
    <td><code>/kill</code></td>
  </tr>
  <tr>
    <td><code>/lock</code></td>
    <td>Bloquear sesiÃ³n inmediatamente</td>
    <td><code>/lock</code></td>
  </tr>
  <tr>
    <td><code>/help</code></td>
    <td>Mostrar todos los comandos</td>
    <td><code>/help</code></td>
  </tr>
  <tr>
    <td><em>(texto libre)</em></td>
    <td>Se envÃ­a directamente al proveedor activo</td>
    <td><em>Â¿CÃ³mo optimizo esta query SQL?</em></td>
  </tr>
</table>

<!-- 7. SEGURIDAD -->
<div class="page-break"></div>
<h1 id="security">7. Arquitectura de Seguridad</h1>

<h2>7.1 Modelo de 8 capas</h2>

<div class="diagram">
  Telegram App                           Tu MÃ¡quina
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    MTProto (cifrado)    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Usuario  â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º   â”‚  Claude Remote Bot                   â”‚
  â”‚           â”‚                        â”‚                                      â”‚
  â”‚  /auth    â”‚    Capa 1: Transporte  â”‚  Capa 2: Whitelist (Telegram ID)     â”‚
  â”‚  PIN â”â”â”â”â”â”¿â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â–º  â”‚  Capa 3: PIN (tiempo-constante)      â”‚
  â”‚           â”‚                        â”‚  Capa 4: Anti-bruteforce (5 â†’ lock)  â”‚
  â”‚  Mensaje  â”‚                        â”‚  Capa 5: SesiÃ³n (auto-lock timeout)  â”‚
  â”‚  â”â”â”â”â”â”â”â”â”â”¿â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â–º  â”‚  Capa 6: Rate limit (N/min)         â”‚
  â”‚           â”‚                        â”‚  Capa 7: Cifrado AES-256-GCM        â”‚
  â”‚  â—„â”â”â”â”â”â”â”â”â”¿â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”   â”‚  Capa 8: Auto-delete (opcional)     â”‚
  â”‚ Respuesta â”‚                        â”‚                                      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                                       â”‚  â”‚ Claude Code  â”‚ â”‚ OpenAI/      â”‚   â”‚
                                       â”‚  â”‚ CLI (agentic)â”‚ â”‚ Gemini/Groq  â”‚   â”‚
                                       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                                       â”‚                                      â”‚
                                       â”‚  ğŸ“ Audit Log (AES-256-GCM + HMAC)  â”‚
                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</div>

<h2>7.2 Cifrado</h2>

<table>
  <tr><th>Componente</th><th>EspecificaciÃ³n</th></tr>
  <tr><td>Algoritmo</td><td>AES-256-GCM (cifrado autenticado)</td></tr>
  <tr><td>DerivaciÃ³n de clave</td><td>PBKDF2 con 310.000 iteraciones + SHA-512</td></tr>
  <tr><td>IV (vector de inicializaciÃ³n)</td><td>16 bytes aleatorios por mensaje</td></tr>
  <tr><td>Salt</td><td>32 bytes aleatorios por mensaje</td></tr>
  <tr><td>Integridad</td><td>HMAC-SHA256 sobre todo el payload</td></tr>
  <tr><td>Resultado</td><td>Cada cifrado es Ãºnico, incluso con el mismo texto</td></tr>
</table>

<h2>7.3 AutenticaciÃ³n</h2>
<ul>
  <li><strong>Whitelist</strong> â€” Solo los Telegram IDs configurados pueden interactuar. Usuarios no autorizados son ignorados silenciosamente.</li>
  <li><strong>PIN</strong> â€” ComparaciÃ³n en tiempo constante para prevenir ataques de timing.</li>
  <li><strong>Anti-bruteforce</strong> â€” 5 intentos fallidos â†’ bloqueo de 15 minutos.</li>
  <li><strong>Sesiones</strong> â€” Auto-lock tras inactividad configurable (default: 15 min).</li>
  <li><strong>Auto-delete</strong> â€” El mensaje con el PIN se borra automÃ¡ticamente de Telegram.</li>
</ul>

<div class="box box-danger">
  <div class="box-title">Importante: Seguridad por instalaciÃ³n</div>
  Cada instalaciÃ³n genera su propia contraseÃ±a maestra de cifrado. Las claves no se comparten entre usuarios. Si pierdes tu <code>.env</code>, no hay forma de recuperar los datos del audit log.
</div>

<!-- 8. ARQUITECTURA -->
<div class="page-break"></div>
<h1 id="architecture">8. Arquitectura TÃ©cnica</h1>

<h2>8.1 Stack tecnolÃ³gico</h2>

<table>
  <tr><th>Componente</th><th>TecnologÃ­a</th><th>JustificaciÃ³n</th></tr>
  <tr><td>Runtime</td><td>Node.js 20+</td><td>Async/await nativo, fetch nativo, sin dependencias nativas</td></tr>
  <tr><td>Bot Telegram</td><td>grammY</td><td>Framework moderno, TypeScript-ready, middleware</td></tr>
  <tr><td>Cifrado</td><td>node:crypto</td><td>MÃ³dulo nativo, AES-256-GCM, PBKDF2, HMAC</td></tr>
  <tr><td>APIs IA</td><td>fetch nativo</td><td>Zero dependencias, HTTP estÃ¡ndar</td></tr>
  <tr><td>ConfiguraciÃ³n</td><td>dotenv</td><td>EstÃ¡ndar de la industria</td></tr>
  <tr><td>Audit log</td><td>NDJSON cifrado</td><td>Append-only, sin BD, portÃ¡til</td></tr>
</table>

<h2>8.2 Estructura del proyecto</h2>

<pre><code>claude-remote/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.js              <span class="comment"># Punto de entrada</span>
â”‚   â”œâ”€â”€ bot.js                <span class="comment"># Bot Telegram + handlers</span>
â”‚   â”œâ”€â”€ setup.js              <span class="comment"># Configurador interactivo</span>
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ guard.js          <span class="comment"># Whitelist + anti-bruteforce</span>
â”‚   â”‚   â””â”€â”€ session.js        <span class="comment"># Sesiones + timeout</span>
â”‚   â”œâ”€â”€ crypto/
â”‚   â”‚   â””â”€â”€ cipher.js         <span class="comment"># AES-256-GCM + HMAC + PBKDF2</span>
â”‚   â”œâ”€â”€ providers/
â”‚   â”‚   â”œâ”€â”€ base.js           <span class="comment"># Interfaz base</span>
â”‚   â”‚   â”œâ”€â”€ manager.js        <span class="comment"># Gestor multi-proveedor</span>
â”‚   â”‚   â”œâ”€â”€ claude.js         <span class="comment"># Claude Code CLI</span>
â”‚   â”‚   â”œâ”€â”€ openai.js         <span class="comment"># OpenAI GPT-4o</span>
â”‚   â”‚   â”œâ”€â”€ gemini.js         <span class="comment"># Google Gemini</span>
â”‚   â”‚   â”œâ”€â”€ groq.js           <span class="comment"># Groq Llama 3.3</span>
â”‚   â”‚   â””â”€â”€ anthropic.js      <span class="comment"># Anthropic Sonnet</span>
â”‚   â”œâ”€â”€ claude/
â”‚   â”‚   â””â”€â”€ formatter.js      <span class="comment"># Chunking para Telegram</span>
â”‚   â”œâ”€â”€ security/
â”‚   â”‚   â”œâ”€â”€ ratelimit.js      <span class="comment"># Rate limiting</span>
â”‚   â”‚   â””â”€â”€ audit.js          <span class="comment"># Audit log cifrado</span>
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ config.js         <span class="comment"># ConfiguraciÃ³n</span>
â”‚       â”œâ”€â”€ logger.js         <span class="comment"># Logger</span>
â”‚       â””â”€â”€ keygen.js         <span class="comment"># Generador de claves</span>
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ crypto.test.js        <span class="comment"># 11 tests de cifrado</span>
â”œâ”€â”€ installer.sh              <span class="comment"># Instalador corporativo</span>
â”œâ”€â”€ .env.example              <span class="comment"># Plantilla de config</span>
â””â”€â”€ package.json</code></pre>

<h2>8.3 Dependencias</h2>

<p>Solo <strong>2 dependencias</strong> de producciÃ³n (zero nativas):</p>
<table>
  <tr><th>Paquete</th><th>VersiÃ³n</th><th>FunciÃ³n</th></tr>
  <tr><td>grammy</td><td>^1.31</td><td>Framework bot Telegram</td></tr>
  <tr><td>dotenv</td><td>^16.4</td><td>Variables de entorno</td></tr>
</table>

<!-- 9. TROUBLESHOOTING -->
<div class="page-break"></div>
<h1 id="troubleshooting">9. ResoluciÃ³n de Problemas</h1>

<table>
  <tr>
    <th>Problema</th>
    <th>Causa</th>
    <th>SoluciÃ³n</th>
  </tr>
  <tr>
    <td>El bot no responde</td>
    <td>No estÃ¡ corriendo o token incorrecto</td>
    <td>Verificar <code>npm start</code> y el token en <code>.env</code></td>
  </tr>
  <tr>
    <td>"Session expired"</td>
    <td>Timeout de inactividad</td>
    <td>Enviar <code>/auth &lt;PIN&gt;</code> de nuevo</td>
  </tr>
  <tr>
    <td>"Locked out"</td>
    <td>5 intentos de PIN fallidos</td>
    <td>Esperar 15 minutos</td>
  </tr>
  <tr>
    <td>"Rate limited"</td>
    <td>Demasiados comandos por minuto</td>
    <td>Esperar unos segundos</td>
  </tr>
  <tr>
    <td>"Provider not configured"</td>
    <td>Falta API key del proveedor</td>
    <td>Ejecutar <code>npm run setup</code> y aÃ±adir la API key</td>
  </tr>
  <tr>
    <td>Claude Code no funciona</td>
    <td>CLI no instalado</td>
    <td><code>npm i -g @anthropic-ai/claude-code</code></td>
  </tr>
  <tr>
    <td>Gemini error 429</td>
    <td>LÃ­mite diario alcanzado (20 req)</td>
    <td>Cambiar a Groq: <code>/ia groq</code></td>
  </tr>
  <tr>
    <td>Error de cifrado</td>
    <td>.env corrupto o cambiado</td>
    <td>El audit log anterior no serÃ¡ legible. Borrar <code>data/</code> y empezar de nuevo.</td>
  </tr>
</table>

<h3>Logs</h3>
<pre><code><span class="comment"># Ver logs en tiempo real</span>
<span class="cmd">tail -f</span> ~/claude-remote/data/claude-remote.log

<span class="comment"># Si usa servicio en macOS</span>
<span class="cmd">tail -f</span> ~/claude-remote/data/claude-remote.log

<span class="comment"># Si usa servicio en Linux</span>
<span class="cmd">journalctl</span> --user -u claude-remote -f</code></pre>

<h3>Reconfigurar</h3>
<pre><code><span class="cmd">cd</span> ~/claude-remote && <span class="cmd">npm run</span> setup</code></pre>

<h3>Desinstalar</h3>
<pre><code><span class="cmd">bash</span> ~/claude-remote/installer.sh --uninstall</code></pre>

<!-- 10. VARIABLES -->
<div class="page-break"></div>
<h1 id="env">10. Variables de Entorno</h1>

<table>
  <tr>
    <th>Variable</th>
    <th>Req.</th>
    <th>Default</th>
    <th>DescripciÃ³n</th>
  </tr>
  <tr><td><code>TELEGRAM_BOT_TOKEN</code></td><td>SÃ­</td><td>â€”</td><td>Token del bot de Telegram</td></tr>
  <tr><td><code>AUTHORIZED_USERS</code></td><td>SÃ­</td><td>â€”</td><td>IDs Telegram autorizados (coma)</td></tr>
  <tr><td><code>AUTH_PIN</code></td><td>SÃ­</td><td>â€”</td><td>PIN de autenticaciÃ³n</td></tr>
  <tr><td><code>MASTER_PASSWORD</code></td><td>SÃ­</td><td>â€”</td><td>ContraseÃ±a maestra cifrado (16+ chars)</td></tr>
  <tr><td><code>SESSION_TIMEOUT_MIN</code></td><td>No</td><td>15</td><td>Timeout sesiÃ³n (minutos)</td></tr>
  <tr><td><code>RATE_LIMIT_PER_MIN</code></td><td>No</td><td>10</td><td>Max comandos/minuto</td></tr>
  <tr><td><code>AUTO_DELETE_SEC</code></td><td>No</td><td>0</td><td>Auto-borrar mensajes (0 = off)</td></tr>
  <tr><td><code>CLAUDE_BIN</code></td><td>No</td><td>claude</td><td>Ruta binario Claude Code</td></tr>
  <tr><td><code>DEFAULT_WORK_DIR</code></td><td>No</td><td>$HOME</td><td>Directorio trabajo por defecto</td></tr>
  <tr><td><code>MAX_CONCURRENT</code></td><td>No</td><td>2</td><td>Procesos Claude simultÃ¡neos</td></tr>
  <tr><td><code>OPENAI_API_KEY</code></td><td>No</td><td>â€”</td><td>API key OpenAI</td></tr>
  <tr><td><code>OPENAI_MODEL</code></td><td>No</td><td>gpt-4o</td><td>Modelo OpenAI</td></tr>
  <tr><td><code>GEMINI_API_KEY</code></td><td>No</td><td>â€”</td><td>API key Google Gemini</td></tr>
  <tr><td><code>GEMINI_MODEL</code></td><td>No</td><td>gemini-2.5-flash</td><td>Modelo Gemini</td></tr>
  <tr><td><code>ANTHROPIC_API_KEY</code></td><td>No</td><td>â€”</td><td>API key Anthropic</td></tr>
  <tr><td><code>ANTHROPIC_MODEL</code></td><td>No</td><td>claude-sonnet-4</td><td>Modelo Anthropic</td></tr>
  <tr><td><code>GROQ_API_KEY</code></td><td>No</td><td>â€”</td><td>API key Groq</td></tr>
  <tr><td><code>GROQ_MODEL</code></td><td>No</td><td>llama-3.3-70b</td><td>Modelo Groq</td></tr>
  <tr><td><code>LOG_LEVEL</code></td><td>No</td><td>info</td><td>debug/info/warn/error</td></tr>
</table>

<!-- FOOTER -->
<div class="footer">
  <p>Claude Remote v1.2 Â· Redegal Â· Digital Consulting Group Â· Febrero 2026</p>
  <p>Documento interno â€” Uso exclusivo del equipo de Redegal</p>
</div>

</body>
</html>
